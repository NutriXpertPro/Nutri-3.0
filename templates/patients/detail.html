{% extends 'base_new_dashboard.html' %}

{% block title %}Detalhes de {{ patient.user.name }} - NutriVida Pro{% endblock %}

{% block body_content %}
<div class="dashboard">
    <!-- Header -->
    <div class="header">
        <div class="user-info">
            <div class="patient-card-avatar">
                {% if patient.user.profile_picture %}
                    <img src="{{ patient.user.profile_picture.url }}" alt="{{ patient.user.name }}">
                {% else %}
                    <img src="https://i.pravatar.cc/80?u={{ patient.user.id }}" alt="Paciente">
                {% endif %}
            </div>
            <div class="user-details">
                <h1>{{ patient.user.name }}</h1>
                <p>{{ patient.user.email }}</p>
            </div>
        </div>
        <div class="header-actions">
            <a href="#" class="btn btn-secondary">
                <i class="fas fa-edit"></i> Editar Perfil
            </a>
            <a href="#" class="btn btn-primary">
                <i class="fas fa-plus"></i> Nova Consulta
            </a>
        </div>
    </div>

    <!-- Main Grid -->
    <div class="main-grid">
        <!-- Personal Info Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-user"></i>
                    Informações Pessoais
                </div>
            </div>
            <div class="patient-details-grid">
                <div><strong>Data de Nasc.:</strong> {{ patient.birth_date|date:"d/m/Y" }}</div>
                <div><strong>Idade:</strong> {{ patient.get_age }} anos</div>
                <div><strong>Telefone:</strong> {{ patient.phone|default:"Não informado" }}</div>
                <div><strong>Endereço:</strong> {{ patient.address|default:"Não informado" }}</div>
            </div>
        </div>

        <!-- Key Metrics Card -->
        <div class="card">
            <div class="card-header">
                <div class="card-title">
                    <i class="fas fa-heartbeat"></i>
                    Métricas Principais
                </div>
            </div>
            <div class="patient-metrics">
                <div class="metric">
                    <div class="metric-label">Peso</div>
                    <div class="metric-value">77kg</div>
                    <div class="stat-trend down">
                        <i class="fas fa-arrow-down"></i> -2.3kg
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-label">IMC</div>
                    <div class="metric-value">22.5</div>
                    <div class="stat-trend down">
                        <i class="fas fa-arrow-down"></i> -2%
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-label">Gordura</div>
                    <div class="metric-value">28%</div>
                    <div class="stat-trend down">
                        <i class="fas fa-arrow-down"></i> -1.5%
                    </div>
                </div>
                <div class="metric">
                    <div class="metric-label">Massa</div>
                    <div class="metric-value">55kg</div>
                    <div class="stat-trend up">
                        <i class="fas fa-arrow-up"></i> +1.2kg
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- History Card -->
    <div class="card">
        <div class="card-header">
            <div class="card-title">
                <i class="fas fa-history"></i>
                Histórico do Paciente
            </div>
        </div>
        <div class="timeline">
            <!-- Placeholder for history items -->
            <div class="timeline-item">
                <div class="timeline-time"><div class="hour">04/11</div></div>
                <div class="timeline-content">
                    <div class="timeline-patient">Consulta de Acompanhamento</div>
                    <div class="timeline-note">Paciente relatou melhora na disposição.</div>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-time"><div class="hour">20/10</div></div>
                <div class="timeline-content">
                    <div class="timeline-patient">Entrega de Dieta</div>
                    <div class="timeline-note">Plano alimentar focado em ganho de massa.</div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}