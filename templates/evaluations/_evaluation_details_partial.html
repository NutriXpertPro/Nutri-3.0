<style>
    .modal-eval-header {
        padding-bottom: 15px;
        border-bottom: 1px solid var(--border);
        margin-bottom: 20px;
    }
    .modal-eval-header h3 {
        margin: 0;
        font-size: 24px;
    }
    .modal-eval-header p {
        margin: 5px 0 0;
        color: var(--text-secondary);
    }
    .eval-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 20px;
    }
    .eval-card {
        background-color: var(--bg-secondary);
        border-radius: 8px;
        padding: 20px;
    }
    .eval-card h4 {
        margin-top: 0;
        font-size: 18px;
        color: var(--primary);
        border-bottom: 1px solid var(--border);
        padding-bottom: 10px;
        margin-bottom: 15px;
    }
    .eval-card ul {
        list-style: none;
        padding: 0;
    }
    .eval-card li {
        display: flex;
        justify-content: space-between;
        padding: 6px 0;
        font-size: 14px;
    }
    .eval-photos {
        margin-top: 20px;
    }
    .eval-photos h4 {
        font-size: 18px;
        margin-bottom: 15px;
    }
    .photo-gallery {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
        gap: 15px;
    }
    .photo-gallery a {
        display: block;
        border-radius: 8px;
        overflow: hidden;
        border: 2px solid var(--border);
    }
    .photo-gallery img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
</style>

<div class="modal-eval-details">
    <div class="modal-eval-header">
        <h3>Avaliação de {{ evaluation.date|date:"d/m/Y" }}</h3>
        <p>Detalhes da avaliação para <strong>{{ evaluation.patient.user.name }}</strong></p>
    </div>

    <div class="eval-grid">
        <div class="eval-card">
            <h4>Dados Principais</h4>
            <ul>
                <li><span>Método:</span> <strong>{{ evaluation.get_method_display }}</strong></li>
                <li><span>Altura:</span> <strong>{{ evaluation.height|default:"-" }} m</strong></li>
                <li><span>Peso:</span> <strong>{{ evaluation.weight|default:"-" }} kg</strong></li>
                <li><span>Gordura Corporal:</span> <strong>{{ evaluation.body_fat|default:"-" }} %</strong></li>
                <li><span>Massa Muscular:</span> <strong>{{ evaluation.muscle_mass|default:"-" }} kg</strong></li>
            </ul>
        </div>

        {% if evaluation.body_measurements %}
        <div class="eval-card">
            <h4>Medidas Corporais</h4>
            <ul>
                {% for key, value in evaluation.body_measurements.items %}
                    <li><span>{{ key|title }}:</span> <strong>{{ value }} cm</strong></li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
    </div>

    {% if evaluation.photos.all %}
    <div class="eval-photos">
        <h4>Fotos da Avaliação</h4>
        <div class="photo-gallery">
            {% for photo in evaluation.photos.all %}
                <a href="{{ photo.image.url }}" target="_blank" title="Ver foto {{ photo.get_label_display }}">
                    <img src="{{ photo.image.url }}" alt="Foto {{ photo.get_label_display }}">
                </a>
            {% endfor %}
        </div>
    </div>
    {% endif %}
</div>
